/*
 * jQuery Form Plugin
 * version: 2.82 (15-JUN-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(B){B.fn.ajaxSubmit=function(D){if(!this.length){A("ajaxSubmit: skipping submit process - no element selected");return this}var C,N,F,G=this;if(typeof D=="function"){D={success:D}}C=this.attr("method");N=this.attr("action");F=(typeof N==="string")?B.trim(N):"";F=F||window.location.href||"";if(F){F=(F.match(/^([^#]+)/)||[])[1]}D=B.extend(true,{url:F,success:B.ajaxSettings.success,type:C||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},D);var J={};this.trigger("form-pre-serialize",[this,D,J]);if(J.veto){A("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(D.beforeSerialize&&D.beforeSerialize(this,D)===false){A("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var M,I,S=this.formToArray(D.semantic);if(D.data){D.extraData=D.data;for(M in D.data){if(D.data[M] instanceof Array){for(var O in D.data[M]){S.push({name:M,value:D.data[M][O]})}}else{I=D.data[M];I=B.isFunction(I)?I():I;S.push({name:M,value:I})}}}if(D.beforeSubmit&&D.beforeSubmit(S,this,D)===false){A("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[S,this,D,J]);if(J.veto){A("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var L=B.param(S);if(D.type.toUpperCase()=="GET"){D.url+=(D.url.indexOf("?")>=0?"&":"?")+L;D.data=null}else{D.data=L}var T=[];if(D.resetForm){T.push(function(){G.resetForm()})}if(D.clearForm){T.push(function(){G.clearForm()})}if(!D.dataType&&D.target){var E=D.success||function(){};T.push(function(V){var U=D.replaceTarget?"replaceWith":"html";B(D.target)[U](V).each(E,arguments)})}else{if(D.success){T.push(D.success)}}D.success=function(Y,V,Z){var X=D.context||D;for(var W=0,U=T.length;W<U;W++){T[W].apply(X,[Y,V,Z||G,G])}};var Q=B("input:file",this).length>0;var P="multipart/form-data";var K=(G.attr("enctype")==P||G.attr("encoding")==P);if(D.iframe!==false&&(Q||D.iframe||K)){if(D.closeKeepAlive){B.get(D.closeKeepAlive,function(){H(S)})}else{H(S)}}else{if(B.browser.msie&&C=="get"){var R=G[0].getAttribute("method");if(typeof R==="string"){D.type=R}}B.ajax(D)}this.trigger("form-submit-notify",[this,D]);return this;function H(v){var W=G[0],q,j,t,m,Y,c,Z,b,o,r,f;if(v){for(q=0;q<v.length;q++){B(W[v[q].name]).attr("disabled",false)}}if(B(":input[name=submit],:input[id=submit]",W).length){alert('Error: Form elements must not have name or id of "submit".');return }j=B.extend(true,{},B.ajaxSettings,D);j.context=j.context||j;m="jqFormIO"+(new Date().getTime());if(j.iframeTarget){Y=B(j.iframeTarget);o=Y.attr("name");if(o==null){Y.attr("name",m)}else{m=o}}else{Y=B('<iframe name="'+m+'" src="'+j.iframeSrc+'" />');Y.css({position:"absolute",top:"-1000px",left:"-1000px"})}c=Y[0];Z={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var g=(a==="timeout"?"timeout":"aborted");A("aborting upload... "+g);this.aborted=1;Y.attr("src",j.iframeSrc);Z.error=g;j.error&&j.error.call(j.context,Z,g,a);t&&B.event.trigger("ajaxError",[Z,j,g]);j.complete&&j.complete.call(j.context,Z,g)}};t=j.global;if(t&&!B.active++){B.event.trigger("ajaxStart")}if(t){B.event.trigger("ajaxSend",[Z,j])}if(j.beforeSend&&j.beforeSend.call(j.context,Z,j)===false){if(j.global){B.active--}return }if(Z.aborted){return }b=W.clk;if(b){o=b.name;if(o&&!b.disabled){j.extraData=j.extraData||{};j.extraData[o]=b.value;if(b.type=="image"){j.extraData[o+".x"]=W.clk_x;j.extraData[o+".y"]=W.clk_y}}}var h=1;var d=2;function e(g){var a=g.contentWindow?g.contentWindow.document:g.contentDocument?g.contentDocument:g.document;return a}function p(){var s=G.attr("target"),g=G.attr("action");W.setAttribute("target",m);if(!C){W.setAttribute("method","POST")}if(g!=j.url){W.setAttribute("action",j.url)}if(!j.skipEncodingOverride&&(!C||/post/i.test(C))){G.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(j.timeout){f=setTimeout(function(){r=true;l(h)},j.timeout)}function y(){try{var a=e(c).readyState;A("state = "+a);if(a.toLowerCase()=="uninitialized"){setTimeout(y,50)}}catch(n){A("Server abort: ",n," (",n.name,")");l(d);f&&clearTimeout(f);f=undefined}}var i=[];try{if(j.extraData){for(var z in j.extraData){i.push(B('<input type="hidden" name="'+z+'" />').attr("value",j.extraData[z]).appendTo(W)[0])}}if(!j.iframeTarget){Y.appendTo("body");c.attachEvent?c.attachEvent("onload",l):c.addEventListener("load",l,false)}setTimeout(y,15);W.submit()}finally{W.setAttribute("action",g);if(s){W.setAttribute("target",s)}else{G.removeAttr("target")}B(i).remove()}}if(j.forceSync){p()}else{setTimeout(p,10)}var w,x,u=50,X;function l(y){if(Z.aborted||X){return }try{x=e(c)}catch(AB){A("cannot access response document: ",AB);y=d}if(y===h&&Z){Z.abort("timeout");return }else{if(y==d&&Z){Z.abort("server abort");return }}if(!x||x.location.href==j.iframeSrc){if(!r){return }}c.detachEvent?c.detachEvent("onload",l):c.removeEventListener("load",l,false);var n="success",AA;try{if(r){throw"timeout"}var i=j.dataType=="xml"||x.XMLDocument||B.isXMLDoc(x);A("isXml="+i);if(!i&&window.opera&&(x.body==null||x.body.innerHTML=="")){if(--u){A("requeing onLoad callback, DOM not available");setTimeout(l,250);return }}var AC=x.body?x.body:x.documentElement;Z.responseText=AC?AC.innerHTML:null;Z.responseXML=x.XMLDocument?x.XMLDocument:x;if(i){j.dataType="xml"}Z.getResponseHeader=function(AF){var AE={"content-type":j.dataType};return AE[AF]};if(AC){Z.status=Number(AC.getAttribute("status"))||Z.status;Z.statusText=AC.getAttribute("statusText")||Z.statusText}var a=j.dataType||"";var z=/(json|script|text)/.test(a.toLowerCase());if(z||j.textarea){var s=x.getElementsByTagName("textarea")[0];if(s){Z.responseText=s.value;Z.status=Number(s.getAttribute("status"))||Z.status;Z.statusText=s.getAttribute("statusText")||Z.statusText}else{if(z){var g=x.getElementsByTagName("pre")[0];var AD=x.getElementsByTagName("body")[0];if(g){Z.responseText=g.textContent?g.textContent:g.innerHTML}else{if(AD){Z.responseText=AD.innerHTML}}}}}else{if(j.dataType=="xml"&&!Z.responseXML&&Z.responseText!=null){Z.responseXML=k(Z.responseText)}}try{w=U(Z,j.dataType,j)}catch(y){n="parsererror";Z.error=AA=(y||n)}}catch(y){A("error caught: ",y);n="error";Z.error=AA=(y||n)}if(Z.aborted){A("upload aborted");n=null}if(Z.status){n=(Z.status>=200&&Z.status<300||Z.status===304)?"success":"error"}if(n==="success"){j.success&&j.success.call(j.context,w,"success",Z);t&&B.event.trigger("ajaxSuccess",[Z,j])}else{if(n){if(AA==undefined){AA=Z.statusText}j.error&&j.error.call(j.context,Z,n,AA);t&&B.event.trigger("ajaxError",[Z,j,AA])}}t&&B.event.trigger("ajaxComplete",[Z,j]);if(t&&!--B.active){B.event.trigger("ajaxStop")}j.complete&&j.complete.call(j.context,Z,n);X=true;if(j.timeout){clearTimeout(f)}setTimeout(function(){if(!j.iframeTarget){Y.remove()}Z.responseXML=null},100)}var k=B.parseXML||function(a,g){if(window.ActiveXObject){g=new ActiveXObject("Microsoft.XMLDOM");g.async="false";g.loadXML(a)}else{g=(new DOMParser()).parseFromString(a,"text/xml")}return(g&&g.documentElement&&g.documentElement.nodeName!="parsererror")?g:null};var V=B.parseJSON||function(a){return window["eval"]("("+a+")")};var U=function(z,n,i){var g=z.getResponseHeader("content-type")||"",a=n==="xml"||!n&&g.indexOf("xml")>=0,y=a?z.responseXML:z.responseText;if(a&&y.documentElement.nodeName==="parsererror"){B.error&&B.error("parsererror")}if(i&&i.dataFilter){y=i.dataFilter(y,n)}if(typeof y==="string"){if(n==="json"||!n&&g.indexOf("json")>=0){y=V(y)}else{if(n==="script"||!n&&g.indexOf("javascript")>=0){B.globalEval(y)}}}return y}}};B.fn.ajaxForm=function(C){if(this.length===0){var D={s:this.selector,c:this.context};if(!B.isReady&&D.s){A("DOM not ready, queuing ajaxForm");B(function(){B(D.s,D.c).ajaxForm(C)});return this}A("terminating; zero elements found by selector"+(B.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(E){if(!E.isDefaultPrevented()){E.preventDefault();B(this).ajaxSubmit(C)}}).bind("click.form-plugin",function(I){var H=I.target;var F=B(H);if(!(F.is(":submit,input:image"))){var E=F.closest(":submit");if(E.length==0){return }H=E[0]}var G=this;G.clk=H;if(H.type=="image"){if(I.offsetX!=undefined){G.clk_x=I.offsetX;G.clk_y=I.offsetY}else{if(typeof B.fn.offset=="function"){var J=F.offset();G.clk_x=I.pageX-J.left;G.clk_y=I.pageY-J.top}else{G.clk_x=I.pageX-H.offsetLeft;G.clk_y=I.pageY-H.offsetTop}}}setTimeout(function(){G.clk=G.clk_x=G.clk_y=null},100)})};B.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};B.fn.formToArray=function(N){var M=[];if(this.length===0){return M}var D=this[0];var G=N?D.getElementsByTagName("*"):D.elements;if(!G){return M}var I,H,F,O,E,K,C;for(I=0,K=G.length;I<K;I++){E=G[I];F=E.name;if(!F){continue}if(N&&D.clk&&E.type=="image"){if(!E.disabled&&D.clk==E){M.push({name:F,value:B(E).val()});M.push({name:F+".x",value:D.clk_x},{name:F+".y",value:D.clk_y})}continue}O=B.fieldValue(E,true);if(O&&O.constructor==Array){for(H=0,C=O.length;H<C;H++){M.push({name:F,value:O[H]})}}else{if(O!==null&&typeof O!="undefined"){M.push({name:F,value:O})}}}if(!N&&D.clk){var J=B(D.clk),L=J[0];F=L.name;if(F&&!L.disabled&&L.type=="image"){M.push({name:F,value:J.val()});M.push({name:F+".x",value:D.clk_x},{name:F+".y",value:D.clk_y})}}return M};B.fn.formSerialize=function(C){return B.param(this.formToArray(C))};B.fn.fieldSerialize=function(D){var C=[];this.each(function(){var H=this.name;if(!H){return }var F=B.fieldValue(this,D);if(F&&F.constructor==Array){for(var G=0,E=F.length;G<E;G++){C.push({name:H,value:F[G]})}}else{if(F!==null&&typeof F!="undefined"){C.push({name:this.name,value:F})}}});return B.param(C)};B.fn.fieldValue=function(H){for(var G=[],E=0,C=this.length;E<C;E++){var F=this[E];var D=B.fieldValue(F,H);if(D===null||typeof D=="undefined"||(D.constructor==Array&&!D.length)){continue}D.constructor==Array?B.merge(G,D):G.push(D)}return G};B.fieldValue=function(C,I){var E=C.name,N=C.type,O=C.tagName.toLowerCase();if(I===undefined){I=true}if(I&&(!E||C.disabled||N=="reset"||N=="button"||(N=="checkbox"||N=="radio")&&!C.checked||(N=="submit"||N=="image")&&C.form&&C.form.clk!=C||O=="select"&&C.selectedIndex==-1)){return null}if(O=="select"){var J=C.selectedIndex;if(J<0){return null}var L=[],D=C.options;var G=(N=="select-one");var K=(G?J+1:D.length);for(var F=(G?J:0);F<K;F++){var H=D[F];if(H.selected){var M=H.value;if(!M){M=(H.attributes&&H.attributes.value&&!(H.attributes.value.specified))?H.text:H.value}if(G){return M}L.push(M)}}return L}return B(C).val()};B.fn.clearForm=function(){return this.each(function(){B("input,select,textarea",this).clearFields()})};B.fn.clearFields=B.fn.clearInputs=function(){var C=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var E=this.type,D=this.tagName.toLowerCase();if(C.test(E)||D=="textarea"){this.value=""}else{if(E=="checkbox"||E=="radio"){this.checked=false}else{if(D=="select"){this.selectedIndex=-1}}}})};B.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};B.fn.enable=function(C){if(C===undefined){C=true}return this.each(function(){this.disabled=!C})};B.fn.selected=function(C){if(C===undefined){C=true}return this.each(function(){var D=this.type;if(D=="checkbox"||D=="radio"){this.checked=C}else{if(this.tagName.toLowerCase()=="option"){var E=B(this).parent("select");if(C&&E[0]&&E[0].type=="select-one"){E.find("option").selected(false)}this.selected=C}}})};function A(){var C="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(C)}else{if(window.opera&&window.opera.postError){window.opera.postError(C)}}}})(jQuery);